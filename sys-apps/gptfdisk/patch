@@ -, +, @@ 
 1. libuuid.so is needed by cgdisk.
  2. clang is not well support -std=gnu++11.
  --- gptfdisk-0.8.5.ebuild~	2012-09-29 17:01:28.000000000 +0000
  +++ gptfdisk-0.8.5.ebuild~	2012-10-27 19:39:15.654959985 +0000
  @@ -3,7 +3,7 @@ 
   # $Header: /var/cvsroot/gentoo-x86/sys-apps/gptfdisk/gptfdisk-0.8.5.ebuild,v 1.2 2012/09/29 16:44:31 armin76 Exp $
    
     EAPI=4
     -inherit toolchain-funcs
     +inherit flag-o-matic toolchain-funcs
      
       DESCRIPTION="gdisk - GPT partition table manipulator for Linux"
        HOMEPAGE="http://www.rodsbooks.com/gdisk/"
	@@ -16,11 +16,18 @@ IUSE=""
	 
	  RDEPEND="dev-libs/icu
	   	dev-libs/popt
		-	>=sys-libs/ncurses-5.7-r7"
		+	>=sys-libs/ncurses-5.7-r7
		+	kernel_linux? ( sys-apps/util-linux )"
		 DEPEND="${RDEPEND}"
		  
		  -src_compile() {
		  -	emake CXX="$(tc-getCXX)"
		  +src_prepare() {
		  +	sed	-e "s|^\(CC\s*=\).*|\1 $(tc-getCC)|g" \
		  +		-e "s|^\(CXX\s*=\).*|\1 $(tc-getCXX)|g" \
		  +		-i Makefile || die
		  +
		  +	if icu-config --cxxflags 2>/dev/null | grep -qs "std=\(c\|gnu\)++11"; then
		  +		append-cxxflags -std=c++11
		  +	fi
		   }
		    
		     src_install() {
		     @@ -31,3 +38,7 @@ src_install() {
		      	done
			 	dodoc NEWS README
				 }
				 +
				 +src_test() {
				 +	./gdisk_test.sh || die
				 +}

