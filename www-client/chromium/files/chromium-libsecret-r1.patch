diff --git a/build/common.gypi b/build/common.gypi
index de5e311..1efbd46 100644
--- a/build/common.gypi
+++ b/build/common.gypi
@@ -1967,6 +1967,12 @@
         'use_cups%': 0,
       }],
 
+	  ['os_posix==1 and chromeos==0 and OS!="android" and OS!="ios" and embedded==0' {
+	    'use_libsecret%': 0,
+	  }, {
+	    'use_libsecret%': 0,
+	  }],
+
       ['enable_plugins==1 and (OS=="linux" or OS=="mac" or OS=="win")', {
         'enable_pepper_cdms%': 1,
       }, {
diff --git a/chrome/browser/BUILD.gn b/chrome/browser/BUILD.gn
index 6619495..bba3b25 100644
--- a/chrome/browser/BUILD.gn
+++ b/chrome/browser/BUILD.gn
@@ -478,7 +478,7 @@ static_library("browser") {
                            "//chrome")
     configs += [ ":gnome_keyring" ]
   }
-  if (is_desktop_linux) {
+  if (use_libsecret) {
     sources += rebase_path(gypi_values.chrome_browser_libsecret_sources,
                            ".",
                            "//chrome")
diff --git a/chrome/chrome_browser.gypi b/chrome/chrome_browser.gypi
index 21e29f9..443f2d8 100644
--- a/chrome/chrome_browser.gypi
+++ b/chrome/chrome_browser.gypi
@@ -3273,7 +3273,7 @@
             '../build/linux/system.gyp:gnome_keyring',
           ],
         }],
-        ['OS=="linux" and chromeos!=1', {
+        ['use_libsecret==1', {
           'sources': [ '<@(chrome_browser_libsecret_sources)' ],
           'defines': [
             'USE_LIBSECRET',
diff --git a/chrome/chrome_tests_unit.gypi b/chrome/chrome_tests_unit.gypi
index 34c7254..8c10be9 100644
--- a/chrome/chrome_tests_unit.gypi
+++ b/chrome/chrome_tests_unit.gypi
@@ -2363,7 +2363,7 @@
             '../build/linux/system.gyp:gnome_keyring_direct',
           ],
         }],
-        ['OS=="linux" and chromeos!=1', {
+        ['use_libsecret==1', {
           'sources': [
             'browser/password_manager/native_backend_libsecret_unittest.cc',
            ],
